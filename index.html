<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escáner de QR</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/pestañaEmergente.css">
    <link rel="stylesheet" href="css/ventas.css">
    <link rel="stylesheet" href="css/compras.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

</head>

<body>
    <header>
        <div class="header">
            <div id="main">
                <button id="openbtn" class="openbtn" onclick="openNav()">&#9776; Menú</button>
            </div>
            <div class="titulo">
                <h1>Gestión de stock utilizando código QR</h1>
            </div>
        </div>
        <div id="container">
            <span id="close-sesion" onclick="closeSesion()">&#10006;</span>
            <div id="scanner-qr">
                <video id="video"></video>
                <canvas id="canvas"></canvas>
                <p id="output"></p>
            </div>
        </div>
    </header>

    <div id="sidebar" class="sidebar">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home" type="button"
                    role="tab" aria-controls="home" aria-selected="true">Productos</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button"
                    role="tab" aria-controls="profile" aria-selected="false">Consultar Movimientos</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button"
                    role="tab" aria-controls="contact" aria-selected="false">Compras Automaticas</button>
            </li>
        </ul>
    </div>

    <main>
        <!-- Modal de confirmación -->
        <div id="modalConfirmacion" class="modal">
            <div class="modal-content">
                <p>¿Estás seguro de que deseas eliminar este producto?</p>
                <button id="btnSi" class="btn-confirm">Sí</button>
                <button id="btnNo" class="btn-cancel">No</button>
            </div>
        </div>

        <!-- Modal de notificación -->
        <div id="modalNotificacion" class="modal">
            <div class="modal-content">
                <p id="mensajeNotificacion"></p>
                <button id="btnCerrar" class="btn-close">Cerrar</button>
            </div>
        </div>

        <!--MENU-->
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                <!--Solapa Principal-->
                <button id="añadirProductos" onclick="iniciarEscaneo()">Añadir producto</button>

                <!--Actualizar el stock-->
                <div id="modalConfiguration" class="modal">
                    <div class="modal-content">
                        <button id="btnActualizarStock">actualizar Stock</button>
                        <button id="btnCancelar-actualizacion" class="btn-close">Cerrar</button>
                    </div>
                </div>

                <div class="filtros">
                    <label for="filtro-nombre">Nombre:</label>
                    <input type="text" id="filtro-nombre" name="filtroNombre" placeholder="Ingrese un nombre" required>

                    <div class="filtro-marca">
                        <select id="filtro-Marca">
                            <!-- Las opciones se generarán aquí -->
                        </select>
                    </div>

                    <ul class="filtros-Tipo">
                        <!--Filtros generados-->
                    </ul>
                </div>

                <div id="modalActualizarStock" class="modal">
                    <div class="modal-content">
                        <form id="formActualizarStock">
                            <!-- Campo para escribir la nueva cantidad mínima -->
                            <label for="cantidadMinima">Cantidad Mínima:</label>
                            <input type="number" id="cantidadMinima" name="cantidadMinima"
                                placeholder="Escribe la nueva cantidad mínima" required>

                            <!-- Botón para confirmar -->
                            <button type="submit" id="confirmarStock" class="btn-confirmar">Confirmar</button>
                            <button id="btnCancelar" class="btn-close">Cerrar</button>
                        </form>
                    </div>
                </div>

                <div class="productos">
                    <ul class="lista-productos">
                        <!--Productos generados automaticamente-->
                    </ul>

                    <ul class="productos-qr">
                        <!--Productos agregados y/o modificados del QR-->
                    </ul>
                </div>
            </div>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                <div class="productos">
                    <ul class="lista-ventas">
                        <!--Ventas generadas automaticamente-->
                    </ul>
                </div>
            </div>
            <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                <div class="productos">
                    <ul class="lista-compras">
                        <!--Compras generadas automaticamente-->
                    </ul>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <ul class="nav justify-content-center">
            <li class="nav-item">
                <a class="nav-link" href="#">Members</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Documentation</a>
            </li>
        </ul>
    </footer>
    <!--jsQR-->
    <script src="https://cdn.jsdelivr.net/npm/jsqr/dist/jsQR.js"></script>
    <!--Bootstrap-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

    <script src="https://kit.fontawesome.com/b97dc99dd0.js" crossorigin="anonymous"></script>

    <script src="js/cargas/filtrar.js"></script>

    <script src="js/cargas/cargarProductos.js"></script>
    <script src="js/cargas/cargarVentas.js"></script>
    <script src="js/cargas/cargarCompras.js"></script>
    <script src="js/cargas/cargarFiltros.js"></script>
    <script src="js/cargas/cargarFiltroMarca.js"></script>

    <script src="js/Requests/actualizarProducto.js"></script>
    <script src="js/Requests/eliminarProducto.js"></script>

    <script src="js/Scanner/scannerQR.js"></script>
    <script src="js/sidebar.js"></script>

</body>

</html>